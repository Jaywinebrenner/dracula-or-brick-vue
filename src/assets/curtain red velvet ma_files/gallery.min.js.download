$(function(){var $preview=$("#rg-gallery .selected img"),$esCarousel=$("#rg-gallery div.es-carousel-wrapper"),$carouselItems=$("#rg-gallery .es-carousel-wrapper").children(),$items=$esCarousel.find("ul > li"),$slider=null,sliderSpeed=.5,isEmployeeResource=isLoggedIn()&&typeof Cookies.get("fp_tabs")!=="undefined",galleryHeight=0,blLandscape=window.innerWidth>window.innerHeight?true:false,intEventCount=0,tallestHeight=$("#rg-gallery div.rg-image-wrapper").data("mode"),viewport_w=document.documentElement.clientWidth||document.body.clientWidth,viewport_h=document.documentElement.clientHeight||document.body.clientHeight,navBarHeight=$(".navbar-ts").height(),actionBarHeight=$("#action_bar").height()+5,viewPortHeight=viewport_h-navBarHeight-actionBarHeight,setLayout=function(src){var imgHeight=$("#rg-gallery .selected img").height(),imgWidth=$("#rg-gallery .selected img").width(),zoomWidth=$("#rg-gallery .current-img img").data("zoomwidth")||$(".es-carousel > ul > li > a > img").data("zoomwidth"),zoomHeight=$("#rg-gallery .current-img img").data("zoomheight")||$(".es-carousel > ul > li > a > img").data("zoomheight");if(zoomHeight<galleryHeight||zoomHeight>=zoomWidth&&viewport_h>=viewport_w){galleryImageHeight=Math.min(tallestHeight,viewPortHeight);$("#rg-gallery .selected").css({height:"auto"})}$preview.attr("src",src);if(zoomHeight!==imgHeight||zoomWidth!==imgWidth||galleryImageHeight!==Math.min(tallestHeight,viewPortHeight)){$("#rg-gallery .selected img").css({width:zoomWidth/(zoomHeight/galleryHeight)});$("#rg-gallery .selected img").css({height:zoomHeight/(zoomWidth/viewport_w)});galleryImageHeight=Math.min(tallestHeight,viewPortHeight)}$("#rg-gallery .selected img").css({"max-height":Math.min(galleryImageHeight,zoomHeight)+"px"});$("#rg-gallery .selected img").css({"max-width":Math.min(viewport_w,zoomWidth)+"px"})},setBlend=function(){var curImage=$("#rg-gallery .current-img img");var blendStartColor=curImage.data("blendstartcolor");var blendEndColor=curImage.data("blendendcolor");blendStartColor="#"+(blendStartColor==""?"f7f7f7":blendStartColor);blendEndColor="#"+(blendEndColor==""?"f7f7f7":blendEndColor);$("#rg-gallery .rg-image-wrapper").css({background:"-webkit-linear-gradient("+blendStartColor+","+blendEndColor+")",background:"-o-linear-gradient("+blendStartColor+","+blendEndColor+")",background:"-moz-linear-gradient("+blendStartColor+","+blendEndColor+")",background:"linear-gradient("+blendStartColor+","+blendEndColor+")"})};if(tallestHeight>0){galleryHeight=Math.min(tallestHeight,viewPortHeight);var galleryImageHeight=galleryHeight}else{galleryHeight=viewPortHeight;galleryImageHeight=viewPortHeight}if(screen.width<=1024&&"ontouchstart"in document.documentElement){var previewQuality="large";$("#rg-gallery .selected").css("height","auto");$("#rg-gallery .selected img").css("height","auto")}else{var previewQuality="default"}setLayout($(".current-img img").attr("data-large"));$("#rg-gallery .selected img").show();$(".rg-thumbs ul li:first-child").addClass("current-img");var params={width:$("#rg-gallery .rg-image-container").width(),height:$("#rg-gallery .rg-image-container").height(),autoStart:true};if($("#rg-gallery img[data-mview='true']").data("mview")){var myviewer=marmoset.embed($("#rg-gallery img[data-mview='true']").data("mview-url"),params);if($("#rg-gallery img[data-mview='true']").data("mview-topology")=="on")myviewer.ui.stripData.selectedStrip=4;$("#marmosetUI").parent("div").hide()}initGallery=function(){initCarousel();$slider=$("#rg-gallery .rg-slider").slider({value:1,min:1,max:100,step:1,disabled:true,slide:function(event,ui){}});$("#rg-gallery .rg-slider-btn i, .rg-slider-wrap").on("click",function(event){if(!$("#rg-gallery .rg-slider").slider("option","disabled")){if($("#rg-gallery .rg-slider-btn i").hasClass("fa-play")){$("#rg-gallery .rg-slider-btn i").removeClass("fa-play").addClass("fa-pause");$("#rg-gallery .selected img").trigger("play",[sliderSpeed])}else{$("#rg-gallery .rg-slider-btn i").removeClass("fa-pause").addClass("fa-play");$("#rg-gallery .selected img").trigger("stop")}}})};initCarousel=function(){$("#rg-gallery .es-carousel").width($("#rg-gallery .es-carousel-wrapper").width()-50);carousel=$("#rg-gallery .es-carousel-wrapper").show().elastislide({imageW:68,margin:1,disableNav:true,onClick:function($item){$("#rg-gallery .rg-slider-container").hide();$("#rg-gallery .progress-container").hide();changeImage($item)}})};changeImage=function($item){var previewSrc=$item.find("img").data(previewQuality);$("#rg-gallery .image-resolution").remove();if($item.find("img").data("turntable")==0){$("#rg-gallery .selected img").unreel();$preview.attr("src",previewSrc);$("#rg-gallery .selected").removeClass("turntable")}$(".rg-thumbs li").removeClass("current-img");carousel.elastislide("setCurrent",$item.index());$item.addClass("current-img");var newImg=new Image;newImg.onload=function(){if($item.hasClass("current-img")){setLayout(newImg.src);initImageDisplay($item)}};newImg.src=$(".current-img img").data("default");intEventCount=intEventCount+1;if(intEventCount==1){$(".rg-thumbs img").each(function(){$(this).attr("src",$(this).data(previewQuality))});$(".rg-image-nav-prev").addClass("js-image-nav-prev")}if($(".current-img img").data("mview")){document.getElementsByClassName("rg-image-container")[0].appendChild(myviewer.domRoot);$("#marmosetUI").parent("div").show()}else{$("#rg-gallery .rg-image-container > div:not(.rg-image)").remove();$preview.attr("src",previewSrc);setLayout(previewSrc)}calCounter()};initImageDisplay=function($item){if($item.find("img").data("turntable")==0){setZoom();$("#rg-gallery .selected").removeClass("turntable")}else if($item.find("img").data("turntable")>0){$("#rg-gallery .selected").addClass("turntable");initSpinner()}setBlend()};initSpinner=function(){var $loader=$("#rg-gallery div.rg-loading").show(),$thumb=$(".rg-thumbs .current-img img"),largesrc=$thumb.data(screen.width>1024?"default":previewQuality),previewXFocal=0,previewYFocal=0;$("#rg-gallery .selected img").unreel();if($("#rg-gallery .selected img").attr("src")!==largesrc){$("#rg-gallery .selected img").attr("src",largesrc)}var turntable=$thumb.data("turntable"),arrSrc=largesrc.split("-"),imgPop=arrSrc.pop(),imgPre=arrSrc.join("-"),imgExt=imgPop.substr(imgPop.lastIndexOf(".")),imgStartNum=imgPop.replace(imgExt,""),blContainerZero=imgStartNum.substr(0,1)=="0",tSrc="",imgArr=new Array;if(turntable<=0)return false;for(var i=1;i<=turntable;i++){if(blContainerZero&&i<10){tSrc=imgPre+"-0"+i+imgExt}else{tSrc=imgPre+"-"+i+imgExt}imgArr.push(tSrc)}$("#gprogress_bar").width(1);var sliderSpeed=12.5/imgArr.length;if(!($("#rg-gallery .selected img").width()>0&&$("#rg-gallery .selected img").height()>0)){setTimeout(function(){initSpinner()},1e3);return}var transform="matrix(1, 0, 0, 1, "+previewXFocal*-1+", "+previewYFocal*-1+")";$("#rg-gallery .selected img").reel({speed:sliderSpeed,delay:0,resize_gauge:2e3,responsive:true,scrollable:false,preloader:0,preload:"fidelity",images:imgArr,attr:{style:"max-height:"+galleryHeight+"px"}}).on("mousedown",function(event){event.preventDefault();$("#rg-gallery .selected img").trigger("stop");$("#rg-gallery .rg-slider-btn i").removeClass("fa-pause").addClass("fa-play")});$slider=$("#rg-gallery .rg-slider").slider({value:1,min:1,max:turntable,step:1,disabled:true,slide:function(event,ui){$("#rg-gallery .selected img").trigger("reach",[ui.value,24])}});$("#rg-gallery .rg-slider-container").removeClass("hide").show();$("#rg-gallery .progress-container").removeClass("hide").show()};var setZoom=function(){$(".selected img").attr("src",$(".current-img img").data("default"));if(screen.width>1024){var newImg=new Image;newImg.onload=function(){var imgHeight=newImg.height;var imgWidth=newImg.width;if(isEmployeeResource==true){var dim=imgWidth+" x "+imgHeight;$("#rg-gallery .selected").append('<div class="image-resolution"><span>'+dim+"</span></div>")}if($(".current-img img").data("zoom")==newImg.src){$(".selected img").attr("src",newImg.src)}};newImg.src=$(".current-img img").data("zoom")}};var calCounter=function(){var current,last,len;len=$("#rg-gallery .es-carousel li").length;current=$("#rg-gallery .current-img").prevAll().length;$("#rg-gallery .item-counter").removeClass("hide");$("#rg-gallery .item-counter label").html(current+1+" of "+len);if(len>1){$("#rg-gallery .rg-image-nav").removeClass("hide")}};$(".rg-image-nav-next").click(function(event){event.preventDefault();var $next=$(".rg-thumbs .current-img").next();if($next.length==0){$next=$(".rg-thumbs ul li:first-child")}$next.click()});$(".rg-image-nav-prev").click(function(event){if($(this).hasClass("js-image-nav-prev")){event.preventDefault();var $prev=$(".rg-thumbs .current-img").prev();if($prev.length==0){$prev=$(".rg-thumbs ul li:last-child")}$prev.click()}});$("img[data-mview='true']").click(function(event){if($("#marmosetUI").height())document.getElementsByClassName("rg-image-container")[0].appendChild(myviewer.domRoot)});$("#rg-gallery .preload > div").remove();initGallery();setZoom();initSpinner();calCounter();$(".js-fade-in").fadeIn();$(".rg-thumbs .current-img").next().find("img").attr("src",$(".current-img").next().find("img").data(previewQuality));var actionBarPos=$("#action_bar").offset().top,galleryHeight=$("#rg-gallery").height();$(window).scroll(function(){var navBar=$(".navbar-ts"),actionBar=$("#action_bar"),p=document.documentElement.scrollTop||document.body.scrollTop;if(p>actionBarPos&&$(window).width()>=768){$(actionBar).addClass("fixed-top");$(".ResponsiveProductContainer").attr("style","padding-top:"+actionBar.height()+"px")}else{$(actionBar).removeClass("fixed-top");$(".ResponsiveProductContainer").removeAttr("style")}});$(document).on("keyup",function(e){var eCode=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(eCode==37){$(".js-image-nav-prev").trigger("click")}if(eCode==39){$(".rg-image-nav-next").trigger("click")}});$(window).resize(function(e){if(typeof e.target.window=="object"){viewport_w=document.documentElement.clientWidth||document.body.clientWidth,viewport_h=document.documentElement.clientHeight||document.body.clientHeight,navBarHeight=$(".navbar-ts").height(),actionBarHeight=$("#action_bar").height()+5,viewPortHeight=viewport_h-navBarHeight-actionBarHeight,params={width:$("#rg-gallery .rg-image-container").width(),height:$("#rg-gallery .rg-image-container").height(),autoStart:true};if(window.innerWidth<=1024){var previewQuality="large";$("#rg-gallery .selected").css("height","auto");$("#rg-gallery .selected img").css("height","auto")}else{var previewQuality="default";initSpinner()}galleryHeight=$("#rg-gallery").height();setLayout($(".current-img img").data("default"));actionBarPos=$("#action_bar").offset().top;$(window).trigger("scroll");if($("#marmosetUI").height()){myviewer.resize($("#rg-gallery .rg-image-container").width(),$("#rg-gallery .rg-image-container").height())}initCarousel()}})});
//# sourceMappingURL=gallery.js.map
function SearchQuickPreview(){this.enableQuickPreview=true;this.isListView=false;this.currTarget=null;this.idsQueue=new Array;this.imgQueue=new Array;this.tunQueue=new Array;this.style=5;this.type=1;this.pageType="";this.intPlay=1;this.changeDelay=100;this.changeTime=0;this.scrollSize=-1;this.scrollDelay=50;this.scrollTime=0;this.scrollIndex=-1;this.cartPreUrl="/ShoppingCart/Index.cfm?AddID=";this.RESTUrl="/API/v1/";this.isMoveOut=false;this.isRetina=false;this.isThumbReady=false;this.intOverPlay=0;this.isFirstStandardLoadFailed=false;this.assetLink="";this.assetID=0;this.AssetTitle="";this.price="";this.regularPrice="";this.discountPrice="";this.checkMate="";this.formats="";this.arrThumbs=null;this.imgThumbs="";this.loadedLen=0;this.defaultTurntable=null;this.currTurntable=null;this.turntableIndex=-1;this.isTurntablePlay=true;this.firstImageLoaded=false;this.serviceURL="";this.showPopupAddingTime=0;this.arrLightBoxID=new Array;this.postEvent=function(evt,data){if(typeof TSEvents!=="undefined"){TSEvents.postEvent(evt,data,"user_event")}}}SearchQuickPreview.instance=null;SearchQuickPreview.getInstance=function(){if(SearchQuickPreview.instance==null)SearchQuickPreview.instance=new SearchQuickPreview;return SearchQuickPreview.instance};SearchQuickPreview.prototype.init=function(){$(".popover").remove();if(this.enableQuickPreview==false){return}this.discountPrice=this.currTarget.find(".discount-price").text();if(this.discountPrice!=""){this.price=this.discountPrice;this.regularPrice=this.currTarget.find(".price").text().replace(this.discountPrice,"")}else{this.regularPrice=this.currTarget.find(".RegularProductPrice").text();this.price=this.currTarget.find(".price").text().replace(this.regularPrice,"")}this.thumbnail=this.currTarget.find(".thumbnail");this.checkMate=this.currTarget.find(".certifications img");this.formats=this.currTarget.find(".formatInfo").length==0?this.currTarget.find(".format"):this.currTarget.find(".formatInfo");var priceSplit="";var cents="";if(this.regularPrice!=""&&this.regularPrice.indexOf(".")>=0){priceSplit=this.regularPrice.split(".");cents=priceSplit.pop();if(cents=="00")cents="";else priceSplit.push(cents);this.regularPrice=priceSplit.join(".")}if(this.price!=""&&this.price.indexOf(".")>=0){priceSplit=this.price.split(".");cents=priceSplit.pop();if(cents=="00")cents="";else priceSplit.push(cents);this.price=priceSplit.join(".")}if(this.checkMate.length==0){this.checkMate=this.currTarget.find(".ListCNameCheckMateLite");if(this.checkMate.length==0)this.checkMate=this.currTarget.find(".ListCNameCheckMatePro")}this.scrollSize=this.thumbnail.attr("thumbCount");this.assetLink=this.thumbnail.find("a").attr("href");if(this.assetLink.indexOf("javascript")>=0){var tmpIndex=this.assetLink.indexOf("location.href='")+15;var tmpLink=this.assetLink.substr(tmpIndex);tmpLink=tmpLink.replace("'","");this.assetLink=tmpLink}this.assetID=this.assetLink.match(/\d+$/)[0];this.clearTimer();this.clearOutView();this.setChangeDelay();this.scrollIndex=-1;this.turntableIndex=-1;this.intOverPlay=0;var v=ieVersion();if(v<=8&&v>0)SearchQuickPreview.getInstance().currTarget.css("z-index",1);this.isFirstStandardLoadFailed=false;this.isThumbReady=false;this.isMoveOut=false;this.changeTime=setTimeout(function(){SearchQuickPreview.getInstance().loadSearchQuickPreview()},this.changeDelay)};SearchQuickPreview.prototype.loadSearchQuickPreview=function(){if(this.isMoveOut==true)return;this.postEvent("quickpreview_show",{asset:this.assetID});var assetID=this.assetID;if(this.intPlay=="1"){this.getQPStyle();this.setOverBoxHTML();this.setPopUpHTML();this.setPopupPosition();this.displayPopUpInit()}this.bindOverBoxEvent();$("#searchPopupImages").find(".loading").hide()};SearchQuickPreview.prototype.getQPStyle=function(){var href=location.href;var style=href.match(/qp_style=\d+/i);if(style!=null){this.style=style.toString().substr(9);Cookies.set("qp_style",this.style,{path:"/"})}else{this.style=Cookies.get("qp_style")}if(this.style!=1&&this.style!=2&&this.style!=5)this.style=5};SearchQuickPreview.prototype.setChangeDelay=function(){if(this.currTarget.hasClass("ListPetite")||this.currTarget.hasClass("TilePetite"))this.changeDelay=325;else if(this.currTarget.hasClass("ListMedium")||this.currTarget.hasClass("TileMedium"))this.changeDelay=350;else this.changeDelay=300};SearchQuickPreview.prototype.setPopupPosition=function(){if(!this.currTarget)return;if(this.isListView==false){if(this.thumbnail==null)return;var $targetPos=this.currTarget.position();var bottomTopPlace=10;var leftPlace=20;var rightPlace=8;var winLeftPlace=$("#wrap").offset().left;if(this.currTarget.data("from")=="related"){$targetPos=this.currTarget.offset()}var winWidth=$("#wrap").width();var leftWidth=$targetPos.left;var paddingLeft=this.thumbnail.parent().css("paddingLeft");if(paddingLeft==""){paddingLeft=10}else{paddingLeft=parseInt(paddingLeft.replace("px",""))}var marginLeft=0;if(this.currTarget.data("from")=="related"){marginLeft=this.currTarget.css("marginLeft");marginLeft=parseInt(marginLeft.replace("px",""));var pageMargin=($("#wrap .ResponsiveProductRight").width()-$("#wrap .ResponsiveProductRight .productRightContainer").width())/2;paddingLeft=paddingLeft+15+pageMargin}leftWidth+=paddingLeft;var rightWidth=winWidth-this.currTarget.width()-$targetPos.left;if(leftWidth>rightWidth){if(leftWidth<=400){popupLeft=0}else{popupLeft=$targetPos.left-400-10+paddingLeft}}else{if(rightWidth<=420&&rightWidth>400){var dic=420-rightWidth;popupLeft=$targetPos.left+paddingLeft+this.currTarget.width()+dic}else if(rightWidth<=400){var dic=420-rightWidth;popupLeft=$targetPos.left+paddingLeft+this.currTarget.width()-dic}else{popupLeft=$targetPos.left+paddingLeft+this.currTarget.width()+10;if(this.currTarget.data("from")=="related")popupLeft=popupLeft+8}}var popupTop=$targetPos.top;if(this.currTarget.data("from")=="related"){popupTop=this.currTarget.offset().top}var popupOffsetTop=popupTop-(document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop);var screenHeight=document.body.offsetHeight;if(popupOffsetTop+$("#searchPopup").outerHeight()>screenHeight){popupTop=popupTop-(popupOffsetTop+$("#searchPopup").outerHeight()-screenHeight)-bottomTopPlace}else if(popupOffsetTop<0){popupTop=popupTop-popupOffsetTop+bottomTopPlace}if(this.pageType=="FullPreview"){var lineTop=70;var screenHeight=document.documentElement.clientHeight;popupTop=$targetPos.top-lineTop;if(popupOffsetTop+$("#searchPopup").outerHeight()>screenHeight){popupTop=$targetPos.top-(popupOffsetTop+$("#searchPopup").outerHeight()-screenHeight)-bottomTopPlace}else if(popupOffsetTop<lineTop){popupTop=$targetPos.top-popupOffsetTop+bottomTopPlace}}if(this.type==4){popupLeft+=4;popupTop=$("#tsLightboxContainer").position().top-120}$("#searchPopup").css("top",popupTop);$("#searchPopup").css("left",popupLeft)}else{var popupLeft=$(this.currTarget).find(".listViewQuickPreviewPlay").position().left+115;$("#searchPopup").css("left",popupLeft)}};SearchQuickPreview.prototype.setOverBoxHTML=function(){if(this.isListView==false){if(this.thumbnail.find(".searchPopupOverBox").length==0){var html="";var playClass=!this.isRetina?"searchPopupOverBoxPlay fa fa-chevron-right":"searchPopupOverBoxPlay fa fa-chevron-right searchPopupOverBoxPlay-Retina";if(this.scrollSize==1){playClass+=" searchPopupOverBoxPlay-disable"}var stgCartHtml='<div class="searchPopupOverBoxCart"><a href="javascript:;" rel="nofollow">'+i18next.t("search:cart")+"</a></div>";var $oneLineCartHTML=$('<div class="searchPopupOverBoxOneLine-cart"><a href="javascript:;" rel="nofollow"><span class="glyphicon glyphicon-shopping-cart"></span></a></div>');var $oneLineCart5HTML=$('<div class="searchPopupOverBoxOneLine-cart5"><a href="javascript:;" rel="nofollow"><span class="glyphicon glyphicon-shopping-cart"></span></a></div>');if(this.type==2){html+='<div class="searchPopupOverLay"></div>';html+='<div class="searchPopupOverBox">';html+='<div class="searchPopupOverBoxLink"></div>';if(this.pageType=="item"||this.pageType=="recommend"&&this.currTarget.parents(".RecommendedProductLeft").length==1){html+='<div class="'+playClass+'" style="border-bottom: 0px solid #D8D8D8;"></div>';html+='<div style="height:1px;"></div>'}else{html+='<div class="'+playClass+'"></div>';html+='<div class="searchPopupOverBoxOneLine">'+$oneLineCart5HTML.get(0).outerHTML+"</div>"}html+="</div>";this.thumbnail.append(html)}else if(this.type==1){var stgDeleteHtml="";if($("#summary_lightboxID").length>0){stgDeleteHtml='<div class="searchPopupOverBoxDelete" assetID="'+SearchQuickPreview.getInstance().assetID+'"></div>'}if(this.style==1){html+='<div class="searchPopupOverLay searchPopupOverLayFirst"></div>';html+='<div class="searchPopupOverBox searchPopupOverBoxFirst">';html+='<div class="'+playClass+'"></div>';html+='<div class="searchPopupOverBoxLink"><a href="javascript:;">see product</a></div>';html+=stgDeleteHtml;html+='<div class="searchPopupOverBoxAddto"><a href="javascript:;">'+i18next.t("search:move_to")+"</a></div>";html+=stgCartHtml;for(var k=0;k<mLen;k++){if($("#summary_lightboxID").length==0||Lightbox.getInstance().lightbox[k].ID!=Lightbox.getInstance().getLightboxID()){html+='<div class="searchPopupOverBoxLightboxMenu" assetID="'+SearchQuickPreview.getInstance().assetID+'" lightboxID="'+Lightbox.getInstance().lightbox[k].ID+'"><a href="javascript:;">'+Lightbox.getInstance().lightbox[k].NAME+"</a></div>"}}if(Lightbox.getInstance().isNewLightboxOn==1){html+='<div class="searchPopupOverBoxLightbox"><a href="javascript:;">'+i18next.t("search:new_lightbox")+"</a></div>"+'<div class="searchPopupOverBoxLightboxForm hidden"><input id="searchPopupOverBoxLightboxName'+SearchQuickPreview.getInstance().assetID+'"/><div class="searchPopupOverBoxLightboxMoveBtn" assetID="'+SearchQuickPreview.getInstance().assetID+'">'+i18next.t("search:add")+"</div></div>"}html+="</div>";this.thumbnail.append(html)}else if(this.style==2){html+='<div class="searchPopupOverLay"></div>';html+='<div class="searchPopupOverBox">';html+='<div class="searchPopupOverBoxLink"></div>';html+=stgDeleteHtml;html+='<div class="'+playClass+'"></div>';if(mLen>1){html+='<div class="searchPopupOverBoxAddto"><a href="javascript:;">'+i18next.t("search:move_to")+"</a></div>";html+=stgCartHtml;for(var k=0;k<mLen;k++){if($("#summary_lightboxID").length==0||Lightbox.getInstance().lightbox[k].ID!=Lightbox.getInstance().getLightboxID()){html+='<div class="searchPopupOverBoxLightboxMenu" assetID="'+SearchQuickPreview.getInstance().assetID+'" lightboxID="'+Lightbox.getInstance().lightbox[k].ID+'"><a href="javascript:;">'+Lightbox.getInstance().lightbox[k].NAME+"</a></div>"}}}else{html+='<div class="searchPopupOverBoxOneLine">'+$oneLineLightbox.get(0).outerHTML+$oneLineCartHTML.get(0).outerHTML+"</div>"}if(Lightbox.getInstance().isNewLightboxOn==1){html+='<div class="searchPopupOverBoxLightbox"><a href="javascript:;">'+i18next.t("search:new_lightbox")+"</a></div>"+'<div class="searchPopupOverBoxLightboxForm hidden"><input id="searchPopupOverBoxLightboxName'+SearchQuickPreview.getInstance().assetID+'"/><div class="searchPopupOverBoxLightboxMoveBtn" assetID="'+SearchQuickPreview.getInstance().assetID+'">'+i18next.t("search:add")+"</div></div>"}html+="</div>";this.thumbnail.append(html)}else if(this.style==5){html+='<table class="takePlace"><tr><td></td></tr></table>';html+='<div class="searchPopupOverLay searchPopupOverLayResponsive"></div>';html+='<div class="searchPopupOverBox searchPopupOverBoxResponsive">';html+='<div class="searchPopupOverBoxLink"></div>';html+=stgDeleteHtml;html+='<div class="'+playClass+'"></div>';html+='<div class="searchPopupOverBoxOneLine">'+$oneLineCart5HTML.get(0).outerHTML+"</div>";html+="</div>";this.thumbnail.append(html)}}else if(this.type==3||this.type==4){if(this.style==1){html+='<div class="searchPopupOverLay searchPopupOverLayFirst hidden"></div>'+'<div class="searchPopupOverBox searchPopupOverBoxFirst hidden">'+'<div class="searchPopupOverBoxDelete" assetID="'+SearchQuickPreview.getInstance().assetID+'"></div>'+'<div class="'+playClass+'"></div>'+'<div class="searchPopupOverBoxAddto"><a href="javascript:;">'+i18next.t("search:move_to")+"</a></div>"+stgCartHtml;for(var k=0;k<mLen;k++){if(Lightbox.getInstance().lightbox[k].ID!=Lightbox.getInstance().currentLightboxID){html+='<div class="searchPopupOverBoxLightboxMenu" assetID="'+SearchQuickPreview.getInstance().assetID+'" lightboxID="'+Lightbox.getInstance().lightbox[k].ID+'"><a href="javascript:;">'+Lightbox.getInstance().lightbox[k].NAME+"</a></div>"}}if(Lightbox.getInstance().isNewLightboxOn==1){html+='<div class="searchPopupOverBoxLightbox"><a href="javascript:;">'+i18next.t("search:new_lightbox")+"</a></div>"+'<div class="searchPopupOverBoxLightboxForm hidden"><input id="searchPopupOverBoxLightboxName'+SearchQuickPreview.getInstance().assetID+'"/><div class="searchPopupOverBoxLightboxMoveBtn" assetID="'+SearchQuickPreview.getInstance().assetID+'">'+i18next.t("search:add")+"</div></div>"}html+="</div>";this.thumbnail.append(html)}else if(this.style==2){html+='<div class="searchPopupOverLay hidden"></div>'+'<div class="searchPopupOverBox hidden">'+'<div class="searchPopupOverBoxLink"></div>'+'<div class="searchPopupOverBoxDelete" assetID="'+SearchQuickPreview.getInstance().assetID+'"></div>'+'<div class="'+playClass+'"></div>';if(mLen>1){html+='<div class="searchPopupOverBoxAddto"><a href="javascript:;">'+i18next.t("search:move_to")+"</a></div>";html+=stgCartHtml;for(var k=0;k<mLen;k++){if(Lightbox.getInstance().lightbox[k].ID!=Lightbox.getInstance().currentLightboxID){html+='<div class="searchPopupOverBoxLightboxMenu" assetID="'+SearchQuickPreview.getInstance().assetID+'" lightboxID="'+Lightbox.getInstance().lightbox[k].ID+'"><a href="javascript:;">'+Lightbox.getInstance().lightbox[k].NAME+"</a></div>"}}}else{html+='<div class="searchPopupOverBoxOneLine">'+$oneLineLightbox.get(0).outerHTML+$oneLineCartHTML.get(0).outerHTML+"</div>"}if(Lightbox.getInstance().isNewLightboxOn==1){html+='<div class="searchPopupOverBoxLightbox"><a href="javascript:;">'+i18next.t("search:new_lightbox")+"</a></div>"+'<div class="searchPopupOverBoxLightboxForm hidden"><input id="searchPopupOverBoxLightboxName'+SearchQuickPreview.getInstance().assetID+'"/><div class="searchPopupOverBoxLightboxMoveBtn" assetID="'+SearchQuickPreview.getInstance().assetID+'">'+i18next.t("search:add")+"</div></div>"}html+="</div>";this.thumbnail.append(html)}}}}else{if($(this.currTarget).find(".assetcontent .listViewQuickPreviewPlay").length==0){var html='<div class="listViewQuickPreviewPlay">';var playClass=!this.isRetina?"searchPopupOverBoxPlay fa fa-chevron-right":"searchPopupOverBoxPlay searchPopupOverBoxPlay-Retina fa fa-chevron-right";if(this.scrollSize==1){playClass+=" searchPopupOverBoxPlay-disable"}html+='<div class="'+playClass+'"></div>';html+="</div>";$(this.currTarget).find(".assetcontent").append(html)}}this.thumbnail.find(".certifications img").hide()};SearchQuickPreview.prototype.setPopUpHTML=function(){if($("body").find(".searchPopup").length==0){var html="";if(this.isListView==false){html+='<div class="searchPopup" id="searchPopup">'}else{html+='<div class="searchPopup searchPopupListView" id="searchPopup">'}html+='<div class="searchPopupImages" id="searchPopupImages"></div>';html+='<div class="searchPopupSelection" id="searchPopupSelection"></div>';html+='<div class="searchPopupBottomContainer">';html+='<div class="searchPopupTitle" id="searchPopupTitle"><i class="searchPopupStem"></i><div></div><span></span><label class="hidden" id="searchPopupAlpha"></label></div>';html+='<div class="searchPopupFormat" id="searchPopupFormat"></div>';html+="</div>";html+="</div>";$("body").append(html)}};SearchQuickPreview.prototype.clearOutView=function(){var currID=this.thumbnail.attr("id");if(this.isListView==false){$.each(this.idsQueue,function(i,id){if(id!=currID&&id!=""){$("#"+id).find(".searchPopupOverBox").hide();$("#"+id).find(".searchPopupOverLay").hide();$("#"+id).find(".takePlace").hide();$("#"+id).find("table").first().css({position:"static","z-index":"0"});$("#"+id).find("table").find("img").removeClass("topRadius-over")}})}else{$(this.currTarget).find(".listViewQuickPreviewPlay").hide()}if($.inArray(currID,this.idsQueue)==-1){this.idsQueue.push(currID)}};SearchQuickPreview.prototype.clearTimer=function(){clearTimeout(this.changeTime);clearTimeout(this.scrollTime)};SearchQuickPreview.prototype.undoAction=function(){if(this.intPlay!="1")return;if($("#searchPopup").is(":visible"))this.postEvent("quickpreview_hide",{asset:this.assetID});var v=ieVersion();if(v<=8&&v>0)SearchQuickPreview.getInstance().currTarget.css("z-index","");this.isMoveOut=true;if(this.isListView==false&&this.thumbnail){this.thumbnail.find(".searchPopupOverLay").hide();this.thumbnail.find(".searchPopupOverBox").hide();this.thumbnail.find(".takePlace").hide();this.thumbnail.find(".delete").hide();this.thumbnail.find("table").find("img").removeClass("topRadius-over");this.thumbnail.find("table").first().css({position:"static","z-index":"0"})}else{$(this.currTarget).find(".listViewQuickPreviewPlay").hide()}this.clearTimer();$("#searchPopup").hide();$("body:not(.en_US) #searchPopupTitle div").hide();this.thumbnail.find(".certifications img").show()};SearchQuickPreview.prototype.bindOverBoxEvent=function(){var arrowOverClass=!this.isRetina?"mouseHoverArrow-over":"mouseHoverArrow-overRetina";var arrowClickClass=!this.isRetina?"mouseHoverArrow-click":"mouseHoverArrow-clickRetina";if(this.isListView==true){var btn=$(".listViewQuickPreviewPlay .searchPopupOverBoxPlay");btn.unbind();btn.bind({mousedown:function(){if($(this).hasClass("searchPopupOverBoxPlay")&&!$(this).hasClass("searchPopupOverBoxPlay-disable")){$("#searchPopupSelection").show();SearchQuickPreview.getInstance().postEvent("quickpreview_play",{asset:SearchQuickPreview.getInstance().assetID})}},mouseover:function(){if($(this).hasClass("searchPopupOverBoxPlay-disable")){$("#searchPopupSelection").show()}else{$(this).addClass(arrowOverClass);$("#searchPopupSelection").css("color","#006B9C");$("#searchPopupSelection strong").css("color","#006B9C");SearchQuickPreview.getInstance().showPopupImageBox();if((SearchQuickPreview.getInstance().style==2||SearchQuickPreview.getInstance().style==5)&&SearchQuickPreview.getInstance().intOverPlay==0){SearchQuickPreview.getInstance().intOverPlay++}}},mouseup:function(){if($(this).hasClass("searchPopupOverBoxPlay")&&!$(this).hasClass("searchPopupOverBoxPlay-disable")){$(this).removeClass(arrowClickClass)}},click:function(){if($(this).hasClass("searchPopupOverBoxPlay")){SearchQuickPreview.getInstance().getImageSize(true)}}});return}var $overBox=this.thumbnail.find(".searchPopupOverBox");var $firstTable=this.thumbnail.find("table").first();var $cartDeleteBtn=this.thumbnail.find(".deletePermanentIcon");var cartUrl=this.cartPreUrl+this.assetID;$firstTable.unbind();$firstTable.bind("mouseenter",function(){$overBox.find(".searchPopupOverBoxLink").css("background-color","#fff")});$cartDeleteBtn.unbind();$cartDeleteBtn.bind("click",function(){var cartItem=$(this).parents(".AssetTile");var assetID=$(this).parents(".AssetTile").attr("id").replace("ShoppingCartItemAsset","");ShoppingCart.getInstance().RemoveShoppingCartItem(assetID)});$overBox.find("div").unbind();$overBox.find("div").bind({mouseover:function(){if(!$(this).hasClass("searchPopupOverBoxOneLine")){$(this).addClass("mouseHover");if($(this).hasClass("searchPopupOverBoxLink"))$(this).css("background-color","#fff");if($(this).hasClass("searchPopupOverBoxPlay"))$(this).css("background-color","#fcfcfc");if($(this).hasClass("searchPopupOverBoxOneLine"))$(this).css("background-color","#fcfcfc")}$(this).removeClass("searchPopupOverBoxOneLine-lightbox-click");$(this).removeClass("searchPopupOverBoxOneLine-lightbox-in");if($(this).hasClass("searchPopupOverBoxPlay")){if($(this).hasClass("searchPopupOverBoxPlay-disable")){$("#searchPopupSelection").show()}else{$(this).addClass(arrowOverClass);$("#searchPopupSelection").css("color","#006B9C");$("#searchPopupSelection strong").css("color","#006B9C");SearchQuickPreview.getInstance().showPopupImageBox();if((SearchQuickPreview.getInstance().style==2||SearchQuickPreview.getInstance().style==5)&&SearchQuickPreview.getInstance().intOverPlay==0){SearchQuickPreview.getInstance().intOverPlay++}}}if(!$(this).hasClass("searchPopupOverBoxCart")&&!$(this).hasClass("searchPopupOverBoxLightbox")&&!$(this).hasClass("searchPopupOverBoxLightboxMenu")&&!$(this).hasClass("searchPopupOverBoxLightboxForm")){$(this).siblings(".searchPopupOverBoxAddto").show();$(this).siblings(".searchPopupOverBoxCart").hide();$(this).siblings(".searchPopupOverBoxLightbox").hide();$(this).siblings(".searchPopupOverBoxLightboxMenu").hide()}if($(this).hasClass("searchPopupOverBoxAddto")){$(this).hide();$(this).siblings(".searchPopupOverBoxCart").find("a").attr("href",cartUrl);if(SearchQuickPreview.getInstance().type==4)$("#searchPopup").hide();$(this).siblings(".searchPopupOverBoxCart").show();$(this).siblings(".searchPopupOverBoxLightbox").show();$(this).siblings(".searchPopupOverBoxLightboxMenu").show()}if(!$(this).hasClass("searchPopupOverBoxPlay")&&SearchQuickPreview.getInstance().scrollSize<=1){$("#searchPopupSelection").hide()}if($(this).hasClass("searchPopupOverBoxOneLine-cart")&&!$(this).hasClass("searchPopupOverBoxOneLine-cart-disable")){$(this).addClass("searchPopupOverBoxOneLine-cart-over")}if($(this).hasClass("searchPopupOverBoxOneLine-cart5")&&!$(this).hasClass("searchPopupOverBoxOneLine-cart5-disable")){$(this).addClass("searchPopupOverBoxOneLine-cart5-over")}if($(this).hasClass("searchPopupOverBoxOneLine-lightbox")&&!$(this).hasClass("searchPopupOverBoxOneLine-lightbox-disable")){$(this).addClass("searchPopupOverBoxOneLine-lightbox-over")}$overBox.find(".searchPopupOverBoxOneLine-cart").find("a").attr("href",cartUrl);$overBox.find(".searchPopupOverBoxOneLine-cart5").find("a").attr("href",cartUrl);$(this).siblings(".searchPopupOverBoxLightboxForm").hide()},mouseout:function(){$(this).removeClass("mouseHover");if($(this).hasClass("searchPopupOverBoxLink"))$(this).css("background-color","#f7f7f7");if($(this).hasClass("searchPopupOverBoxPlay"))$(this).css("background-color","#f7f7f7");if($(this).hasClass("searchPopupOverBoxOneLine"))$(this).css("background-color","#f7f7f7");$(this).removeClass("searchPopupOverBoxOneLine-lightbox-over");$(this).removeClass("searchPopupOverBoxOneLine-cart-over");$(this).removeClass("searchPopupOverBoxOneLine-cart5-over");if($(this).hasClass("searchPopupOverBoxPlay")&&!$(this).hasClass("searchPopupOverBoxPlay-disable")){$(this).removeClass(arrowOverClass);$("#searchPopupSelection").css("color","#737476");$("#searchPopupSelection strong").css("color","#000000")}},mousedown:function(){if(!$(this).hasClass("searchPopupOverBoxOneLine"))$(this).addClass("mouseDown");if($(this).hasClass("searchPopupOverBoxPlay")&&!$(this).hasClass("searchPopupOverBoxPlay-disable")){$(this).addClass(arrowClickClass);$("#searchPopupSelection").show();SearchQuickPreview.getInstance().postEvent("quickpreview_play",{asset:SearchQuickPreview.getInstance().assetID})}if(($(this).hasClass("searchPopupOverBoxOneLine-cart")||$(this).hasClass("searchPopupOverBoxOneLine-cart5"))&&!$(this).hasClass("searchPopupOverBoxOneLine-cart-disable")){SearchQuickPreview.getInstance().postEvent("quickpreview_cart",{asset:SearchQuickPreview.getInstance().assetID})}},mouseup:function(){$(this).removeClass("mouseDown");if($(this).hasClass("searchPopupOverBoxPlay")&&!$(this).hasClass("searchPopupOverBoxPlay-disable")){$(this).removeClass(arrowClickClass)}},click:function(){if($(this).hasClass("delete")){ShoppingCart.getInstance().RemoveShoppingCartItem(SearchQuickPreview.getInstance().assetID)}else if($(this).hasClass("searchPopupOverBoxPlay")){SearchQuickPreview.getInstance().loadedLen=0;SearchQuickPreview.getInstance().getImageSize(true);$("#searchPopupSelection strong").css("color","#006B9C")}if($(this).hasClass("searchPopupOverBoxDelete")){if(Lightbox)Lightbox.getInstance().deleteLightboxItem($(this).attr("assetID"))}if($(this).hasClass("searchPopupOverBoxLightbox")){var pos=$(this).offset();$(this).siblings(".searchPopupOverBoxLightboxForm").css("top",pos.top-$(window).scrollTop());if(pos.left+90<parseInt($("#searchPopup").css("left")))$(this).siblings(".searchPopupOverBoxLightboxForm").css("left",parseInt($("#searchPopup").css("left"))-SearchQuickPreview.getInstance().currTarget.width()-20);else $(this).siblings(".searchPopupOverBoxLightboxForm").css("left",pos.left-90);$("#searchPopup").hide();var test=$(this).siblings(".searchPopupOverBoxLightboxForm");$(this).siblings(".searchPopupOverBoxLightboxForm").show();$(this).siblings(".searchPopupOverBoxLightboxForm").find("input").focus()}if($(this).hasClass("searchPopupOverBoxLightboxMoveBtn")){if(Lightbox){Lightbox.getInstance().moveToNewLightboxItem($(this).attr("assetID"),$(this).parent())}}if($(this).hasClass("searchPopupOverBoxLightboxMenu")&&!$(this).hasClass("searchPopupOverBoxLightboxMenu-disable")||$(this).hasClass("searchPopupOverBoxOneLine-lightbox")&&!$(this).hasClass("searchPopupOverBoxOneLine-lightbox-disable")){if(Lightbox){$(this).addClass("searchPopupOverBoxOneLine-lightbox-click");if(SearchQuickPreview.getInstance().type==3||SearchQuickPreview.getInstance().type==4)Lightbox.getInstance().moveToOtherLightboxItem($(this).attr("assetID"),$(this).attr("lightboxID"));else Lightbox.getInstance().insertLightboxItem($(this).attr("assetID"),$(this).attr("lightboxID"));if($.inArray($(this).attr("lightboxID"),SearchQuickPreview.getInstance().arrLightBoxID)==-1)SearchQuickPreview.getInstance().arrLightBoxID.push(parseInt($(this).attr("lightboxID")));SearchQuickPreview.getInstance().changeLightBoxLinkState($(this).attr("assetID"))}}if($(this).hasClass("searchPopupOverBoxCart")&&$(this).find("a").length>0){SearchQuickPreview.getInstance().showPopupAdding()}},keydown:function(evt){if($(this).find("input").length>0){if(Lightbox&&evt.keyCode==13){Lightbox.getInstance().moveToNewLightboxItem($(this).find(".searchPopupOverBoxLightboxMoveBtn").attr("assetID"),$(this))}}}})};SearchQuickPreview.prototype.displayPopUpInit=function(){var thumb=this.thumbnail.find("td").find("img").attr("src");if(this.isListView==false){var $overBox=this.thumbnail.find(".searchPopupOverBox");var formats="";var certFormats="";var fileFormats="";if(this.formats.hasClass("format")){var $formatLabel=this.formats.find("label");if($formatLabel.length>0){$.each($formatLabel,function(i,label){certFormats+=$(label).text()+" "});var $formats=this.formats.clone();$formats.find("label").remove();fileFormats=$formats.text()}else{fileFormats=this.formats.text()+" "}certFormats=certFormats.replace(/(\.|,)/gi,"");fileFormats=fileFormats.replace(/(\.|,)/gi,"");if(this.pageType=="FullPreview"){certFormats="";fileFormats=this.formats.find(".formatContainer").text()}}else{for(var i=0;i<this.formats.length;i++){var $formatInfo=$(this.formats[i]);if($formatInfo.hasClass("certifiedFormat")&&$formatInfo.text()!=""){certFormats+=$formatInfo.text()+" "}else if($formatInfo.text()!=""){fileFormats+=$formatInfo.text()+" "}}}certFormats=$.trim(certFormats);fileFormats=$.trim(fileFormats);if(certFormats!=""){formats+="<strong>"+certFormats+"</strong> ";if(fileFormats!="")formats+=fileFormats}else{if(fileFormats!=""){formats+=fileFormats}}if(formats.length>80)formats=formats.substr(0,80)+"...";$("#searchPopupFormat").html(formats);$("#searchPopupTitle").removeClass();$("#searchPopupTitle").addClass("searchPopupTitle");if(this.checkMate.hasClass("CertifiedLite")||this.checkMate.parent().hasClass("CertifiedLite")||this.checkMate.hasClass("ListCNameCheckMateLite")){$("#searchPopupTitle").addClass("searchPopupTitleCertLite")}else if(this.checkMate.hasClass("CertifiedPro")||this.checkMate.parent().hasClass("CertifiedPro")||this.checkMate.hasClass("ListCNameCheckMatePro")){$("#searchPopupTitle").addClass("searchPopupTitleCertPro")}if(this.checkMate.hasClass("CertifiedStem")||this.checkMate.parent().hasClass("CertifiedStem")||this.checkMate.hasClass("ListCNameStem")){$("#searchPopupTitle").addClass("searchPopupTitleCertStem")}this.assetTitle=this.thumbnail.attr("assetName");this.setTitleDisplay();var $boxLink=$overBox.find(".searchPopupOverBoxLink");$boxLink.css("background-color","#fff");if(this.style==2||this.style==5){this.thumbnail.find("table").first().css({position:"absolute","z-index":"1001"});this.thumbnail.find("td").find("img").addClass("topRadius-over");var v=ieVersion();if(v==7){if(this.pageType=="FullPreview"){this.thumbnail.find("table").first().css({left:"1px"})}else{if(this.pageType=="recommend"){this.thumbnail.find("table").first().css({left:"17px"})}else{this.thumbnail.find("table").first().css({left:"0px"})}}}}$boxLink.find("a").attr("href",this.assetLink);$("#searchPopupTitle span").text(this.price);if(this.regularPrice!=""){$("#searchPopupTitle span").prepend('<label style="font-size: 16px;color: #9F9F9F;text-decoration: line-through; font-weight: normal;">'+this.regularPrice+"</label>")}}var selection="";if(this.scrollSize>1){selection="<strong>1</strong> of "+this.scrollSize;$("#searchPopupSelection").show()}else{selection="1 image";$("#searchPopupSelection").hide()}var standard=thumb.replace(/(Petite|Small|Medium|Res200)/gi,"Large").replace(/(_64\.jpg$|_90\.jpg$|_128\.jpg$|_200\.jpg$)/,"_600.jpg");standard=standard.replace(/(Largeer)/gi,"Large");if(standard.indexOf("nothumb-x64.png")>=0){standard=standard.replace("nothumb-x64.png","nothumb-x600.png");thumb=standard}var thumbHTML='<p default="true"><img id="firstThumbImage" class="thumb" src="'+thumb+'" ></p>';$("#searchPopupSelection").html(selection);$("#searchPopupImages").html(thumbHTML);$("#searchPopupImages").css("display","block");var large_standard=this.thumbnail.find("td").find("img").attr("large_url");if(large_standard&&large_standard!="undefined")standard=large_standard;var assetID=this.assetID;if(this.imgQueue[assetID]==undefined)this.imgQueue[assetID]=new Array;if(this.imgQueue[assetID][0]==undefined){var temp=new Object;var image=new Image;var thumb=$("#searchPopupImages").find("p").eq(0).find(".standard").attr("srcDelay");if(typeof thumb!=="undefined"&&thumb){if(ieVersion()>0&&image.complete){temp.width=image.width;temp.height=image.height;SearchQuickPreview.getInstance().imgQueue[assetID][0]=temp}else{image.onload=function(){temp.width=image.width;temp.height=image.height;SearchQuickPreview.getInstance().imgQueue[assetID][0]=temp;this.onload=null};image.onerror=function(){temp.width=400;temp.height=400;SearchQuickPreview.getInstance().imgQueue[assetID][0]=temp;this.onerror=null}}image.src=thumb}}this.loadFirstStandardImage(standard);this.showPopupBox()};SearchQuickPreview.prototype.setTitleDisplay=function(){if(this.assetTitle!=""&&this.assetTitle!=undefined&&this.assetTitle!=null){var priceWidth=(this.price.length+this.regularPrice.length)*10;var availableTitleWidth=400-priceWidth-($("#searchPopupTitle").innerWidth()-$("#searchPopupTitle").width())-5;var titleWidth=this.assetTitle.length*10;if(titleWidth>availableTitleWidth){$("#searchPopupAlpha").removeClass("hidden");var v=ieVersion();if(v<=10&&v>0){availableTitleWidth=availableTitleWidth-10;$("#searchPopupTitle div").css("text-overflow","ellipsis")}else if(v>0&&v<=6&&this.assetTitle.length>22){this.assetTitle=this.assetTitle.substr(0,22)+"..."}$("#searchPopupTitle div").css("width",availableTitleWidth);$("#searchPopupAlpha").css("right",priceWidth+19)}else{$("#searchPopupAlpha").addClass("hidden");$("#searchPopupTitle div").css("width","auto")}$("#searchPopupTitle div").text(this.assetTitle)}};SearchQuickPreview.prototype.loadFirstStandardImage=function(standard){var image=new Image;$(image).addClass("standard hidden").attr("srcDelay",standard).attr("id","firstStandardImage");$("#firstThumbImage").after(image);this.getImageSize(true);if(ieVersion()>0&&image.complete){SearchQuickPreview.getInstance().firstImageLoadedCallback()
;SearchQuickPreview.getInstance().setPopupImagesHeight(image)}else{image.onload=function(){SearchQuickPreview.getInstance().firstImageLoadedCallback();SearchQuickPreview.getInstance().setPopupImagesHeight(image);this.onload=null};image.onerror=function(){SearchQuickPreview.getInstance().isFirstStandardLoadFailed=true;SearchQuickPreview.getInstance().firstImageLoadedCallback();this.onerror=null}}image.src=standard};SearchQuickPreview.prototype.setPopupImagesHeight=function(image){var ret=new Object;var basicSize=400;var blHardCode=false;if(image.width>=image.height){ret.width=basicSize;ret.height=image.height/(image.width/ret.width)}else{if(image.height>basicSize){ret.height=basicSize;ret.width=image.width/(image.height/ret.height)}else{ret.height=image.height;ret.width=image.width}}$("#searchPopupImages").css("height",ret.height)};SearchQuickPreview.prototype.firstImageLoadedCallback=function(){if(this.isFirstStandardLoadFailed==false){$("#firstThumbImage").hide();$("#firstStandardImage").removeClass("hidden");$("#firstStandardImage").show()}var assetID=this.assetID;var cacheKey="QuickPreview"+assetID;var cacheData=$("#searchPopup").data(cacheKey);var restRequest=this.RESTUrl+"Search/Quick/"+assetID;if(window.location.protocol=="https:")restRequest+="?sslThumbnailImages=1";if(cacheData==undefined||cacheData==null){$.getJSON(restRequest,function(data){$("#searchPopup").data(cacheKey,data);SearchQuickPreview.getInstance().changeView(data,assetID)})}else{SearchQuickPreview.getInstance().changeView(cacheData,assetID)}};SearchQuickPreview.prototype.showPopupBox=function(){if(this.isListView==false){var $overBox=this.thumbnail.find(".searchPopupOverBox");this.thumbnail.find(".delete").show();$overBox.find(".searchPopupOverBoxAddto").show();$overBox.find(".searchPopupOverBoxCart").hide();$overBox.find(".searchPopupOverBoxLightbox").hide();$overBox.show();$($overBox).parent().find(".takePlace").show();this.setPopupPosition()}else{$(this.currTarget).find(".listViewQuickPreviewPlay").show()}this.showPopupImageBox()};SearchQuickPreview.prototype.showPopupImageBox=function(){if(this.isListView==false){$("#searchPopup").show()}else{var popUp=$("#searchPopup");$(this.currTarget).find(".assetcontent").append(popUp);this.setPopupPosition();popUp.show()}};SearchQuickPreview.prototype.showLoadingIndicator=function(){if($("#searchPopupImages").find(".loading").length==0){var html="";html+='<div class="loading"><div id="circleG">';html+='<div id="circleG_1" class="circleG"></div>';html+='<div id="circleG_2" class="circleG"></div>';html+='<div id="circleG_3" class="circleG"></div>';html+="</div></div>";$("#searchPopupImages").prepend(html)}else{$("#searchPopupImages").find(".loading").show()}SearchQuickPreview.prototype.setLoadingIndicatorStyle()};SearchQuickPreview.prototype.setLoadingIndicatorStyle=function(){var height=$("#searchPopupImages").height();if(height>64){var top=(height-32)/2;$("#searchPopupImages").find(".loading").css("top",top)}};SearchQuickPreview.prototype.preLoadingImages=function(index){this.getImageSize(false,index)};SearchQuickPreview.prototype.getImageSize=function(ifNext,index){if(this.scrollSize<1)return;var btnPlay=$(this.thumbnail.find(".searchPopupOverBoxPlay"));if(ifNext){if(btnPlay.hasClass("searchPopupOverBoxPlay-loading")){return}if(this.scrollIndex<parseInt(this.scrollSize)-1){this.scrollIndex++}else{this.scrollIndex=0}var index=this.scrollIndex}else if(index>=parseInt(this.scrollSize)||index>=$("#searchPopupImages").find("p").length)return;if(!this.isThumbReady&&ifNext&&index>0){this.showLoadingIndicator();return}var assetID=this.assetID;var thumb=$("#searchPopupImages").find("p").eq(index).find(".standard").attr("srcDelay");if(this.imgQueue[assetID]==undefined)this.imgQueue[assetID]=new Array;if(this.imgQueue[assetID][index]==undefined){var temp=new Object;var image=new Image;if(index>0&&ifNext)this.showLoadingIndicator();if(ieVersion()>0&&image.complete){temp.width=image.width;temp.height=image.height;SearchQuickPreview.getInstance().imgQueue[assetID][index]=temp;loadCallback()}else{if(index>0&&ifNext){btnPlay.addClass("searchPopupOverBoxPlay-loading")}image.onload=function(){temp.width=image.width;temp.height=image.height;SearchQuickPreview.getInstance().imgQueue[assetID][index]=temp;loadCallback();this.onload=null};image.onerror=function(){temp.width=400;temp.height=400;SearchQuickPreview.getInstance().imgQueue[assetID][index]=temp;loadCallback();this.onerror=null}}image.src=thumb}else{loadCallback()}function loadCallback(){if(ifNext){SearchQuickPreview.getInstance().displayPopUpImage(assetID)}else{SearchQuickPreview.getInstance().preLoadingImages(++index)}$(SearchQuickPreview.getInstance().thumbnail.find(".searchPopupOverBoxPlay")).removeClass("searchPopupOverBoxPlay-loading")}};SearchQuickPreview.prototype.displayPopUpImage=function(assetID){if(assetID!=this.assetID||this.isMoveOut==true)return;var ret=new Object;if(this.scrollIndex==-1)this.scrollIndex=0;var size=this.imgQueue[this.assetID][this.scrollIndex];var basicSize=400;var blHardCode=false;if(size.width==400&&size.height==400){blHardCode=true}try{if(size.width>=size.height){ret.width=basicSize;ret.height=size.height/(size.width/ret.width)}else{if(size.height>basicSize){ret.height=basicSize;ret.width=size.width/(size.height/ret.height)}else{ret.height=size.height;ret.width=size.width}}}catch(e){return}var $p=$("#searchPopupImages").find("p");var pTop=(basicSize-ret.height)/2;var pLeft=(basicSize-ret.width)/2;var pMargin=0;if(ieVersion()==7&&pMargin!=0){pMargin+=-9}if(basicSize>ret.height){pTop=0;$("#searchPopupImages").css("height","auto")}else{$("#searchPopupImages").css("height",basicSize)}$p.eq(this.scrollIndex).css({"padding-top":pTop,"padding-left":pLeft,width:ret.width});if(blHardCode==true){$p.eq(this.scrollIndex).find("img").css({width:"auto",height:"auto"})}else{$p.eq(this.scrollIndex).find("img").css({width:ret.width,height:ret.height})}$p.eq(this.scrollIndex).find(".standard").css("margin-top",pMargin);if(this.scrollIndex>0)$p.eq(this.scrollIndex).find(".standard").attr("src",$p.eq(this.scrollIndex).find(".standard").attr("srcDelay"));this.autoScrollThumbs()};SearchQuickPreview.prototype.fillImgHtml=function(index,thumb){var stcReturn="";var $defaultThumb=$("#searchPopupImages").find("p");if(thumb.STANDARDTRUNT==0){if(index>0){stcReturn='<p><img class="standard" srcDelay="'+thumb.STANDARD+'"></p>'}else if(index==0&&this.isFirstStandardLoadFailed==true&&$("#firstStandardImage").attr("src")!=thumb.STANDARD){$("#firstThumbImage").hide();$("#firstStandardImage").attr({src:thumb.STANDARD,srcDelay:thumb.STANDARD}).show()}}else if(thumb.STANDARDTRUNT>0){var imgSrc=thumb.STANDARD;var arrSrc=imgSrc.split("-");var imgPop=arrSrc.pop();var imgPre=arrSrc.join("-");var imgExt=imgPop.substr(imgPop.lastIndexOf("."));var imgStartNum=imgPop.replace(imgExt,"");var blContainerZero=imgStartNum.substr(0,1)=="0";var tSrc="";var imgArr=new Array;for(var i=1;i<=thumb.STANDARDTRUNT;i++){if(blContainerZero&&i<10){tSrc=imgPre+"-0"+i+imgExt}else{tSrc=imgPre+"-"+i+imgExt}imgArr.push(tSrc)}var span='<span class="hide">'+imgArr.join(",")+"</span>";if(index==0){$defaultThumb.addClass("turntable");$defaultThumb.append(span)}else{stcReturn='<p class="turntable"><img class="standard" srcDelay="'+imgSrc+'">'+span+"</p>"}}return stcReturn};SearchQuickPreview.prototype.changeView=function(jsonCallBack,assetID){if(this.isMoveOut==true)return;if(assetID!=this.assetID)return;if(typeof dataLayer!=="undefined")dataLayer.push({event:"Search",eventAction:"QuickPreview",eventLabel:"AssetID - "+assetID});if(typeof heap!=="undefined"){heap.track("QuickPreview",{action:"MouseOver",product_id:assetID})}if(jsonCallBack!=null){this.arrThumbs=jsonCallBack.ARRTHUMBS;if(jsonCallBack.ASSETNAME.length>0){this.assetTitle=jsonCallBack.ASSETNAME;this.setTitleDisplay()}}$("#searchPopupTitle div").fadeIn("fast");if(this.arrThumbs.length>0){this.imgThumbs="";$.each(this.arrThumbs,function(i,thumb){SearchQuickPreview.getInstance().imgThumbs+=SearchQuickPreview.getInstance().fillImgHtml(i,thumb)});$("#searchPopupImages").append(this.imgThumbs);this.preLoadingImages(1);this.isThumbReady=true;if(this.scrollIndex>=0){this.scrollIndex--;this.getImageSize(true)}}};SearchQuickPreview.prototype.autoScrollThumbs=function(){if(this.scrollSize<1)return;$("#searchPopupImages").find(".loading").hide();this.clearTimer();var $p=$("#searchPopupImages").find("p");$p.hide();$p.eq(this.scrollIndex).show();var selection="";if(this.scrollSize>1){selection="<strong>"+(this.scrollIndex+1)+"</strong> of "+this.scrollSize;$("#searchPopupSelection").html(selection)}if($p.eq(this.scrollIndex).hasClass("turntable")){this.turntableIndex=0;this.loadedLen=0;this.preLoadingTurntable(0)}};SearchQuickPreview.prototype.preLoadingTurntable=function(step){var $p=$("#searchPopupImages").find("p");var img=$p.eq(this.scrollIndex).find("span").text();var arr=img.split(",");var assetID=this.assetID;var preloadLen=arr.length;if(this.tunQueue[assetID]==undefined)this.tunQueue[assetID]=new Array;if(this.tunQueue[assetID][this.scrollIndex]==undefined){for(var i=0;i<preloadLen;i++){var image=new Image;if(ieVersion()>0&&image.complete){SearchQuickPreview.getInstance().preLoadingCallback(assetID,arr.length,preloadLen)}else{image.onload=function(){SearchQuickPreview.getInstance().preLoadingCallback(assetID,arr.length,preloadLen);this.onload=null};image.onerror=function(){SearchQuickPreview.getInstance().preLoadingCallback(assetID,arr.length,preloadLen);this.onerror=null}}image.src=arr[i]}}else{this.autoScrollTurntable(arr.length)}};SearchQuickPreview.prototype.preLoadingCallback=function(assetID,turntableLen,preloadLen){if(assetID!=this.assetID||this.isMoveOut==true)return;this.loadedLen++;if(this.loadedLen==preloadLen){if(preloadLen==turntableLen){this.tunQueue[assetID][this.scrollIndex]=turntableLen}if(preloadLen<turntableLen){this.loadedLen=0;this.preLoadingTurntable(1)}this.autoScrollTurntable(preloadLen)}};SearchQuickPreview.prototype.autoScrollTurntable=function(preloadLen){var $p=$("#searchPopupImages").find("p");var img=$p.eq(this.scrollIndex).find("span").text();var arr=img.split(",");var _this=this;if($p.eq(this.scrollIndex).find("img").eq(this.turntableIndex+1).length==0){if(this.scrollIndex==0)var image=$p.eq(this.scrollIndex).find("img")[1];else var image=$p.eq(this.scrollIndex).find("img")[0];if(ieVersion()>0&&image.complete){}else{image.onload=function(){this.onload=null};image.onerror=function(){this.onerror=null}}image.src=arr[this.turntableIndex];image.srcdelay=arr[this.turntableIndex]}if(this.turntableIndex>=arr.length-1)this.turntableIndex=0;else this.turntableIndex++;if(this.turntableIndex<preloadLen)this.scrollTime=setTimeout(function(){SearchQuickPreview.getInstance().autoScrollTurntable(preloadLen)},this.scrollDelay);else this.clearTimer()};SearchQuickPreview.prototype.showPopupAdding=function(){if($("#popupAddingTxt").length==0){$("#searchPopup").append('<div id="popupAddingTxt" class="popupAddingTxt">Adding...</div>');$("#popupAddingTxt").css("top",($("#searchPopup").height()-$("#popupAddingTxt").height())/2+"px");$("#popupAddingTxt").css("left",($("#searchPopup").width()-$("#popupAddingTxt").width())/2+"px")}else{$("#popupAddingTxt").show()}var i=0;this.showPopupAddingTime=setInterval(function(){switch(i%4){case 0:$("#popupAddingTxt").html("Adding");break;case 1:$("#popupAddingTxt").html("Adding.");break;case 2:$("#popupAddingTxt").html("Adding..");break;case 3:$("#popupAddingTxt").html("Adding...");break}i++},500)};SearchQuickPreview.prototype.hidePopupAdding=function(){if(this.showPopupAddingTime>0){$("#popupAddingTxt").hide();clearInterval(this.showPopupAddingTime);this.showPopupAddingTime=0}};SearchQuickPreview.prototype.setSearchPopupOverBoxHeight=function(set){if(set){var itemHeight=$("#tsLightboxItem"+this.assetID).find(".searchPopupOverBox").height();$("#tsLightboxItem"+this.assetID).height(itemHeight)}else{$("#tsLightboxItem"+this.assetID).height(154)}};SearchQuickPreview.prototype.isTouchDevice=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return true;else return false};function ieVersion(){var v=0;if(navigator.userAgent.indexOf("MSIE 6.0")>0){v=6}else if(navigator.userAgent.indexOf("MSIE 7.0")>0){v=7}else if(navigator.userAgent.indexOf("MSIE 8.0")>0){v=8}else if(navigator.userAgent.indexOf("MSIE 9.0")>0){v=9}else if(navigator.userAgent.indexOf("MSIE 10.0")>0){v=10}else if(navigator.userAgent.indexOf("Trident")>0){v=11}return v}
//# sourceMappingURL=SearchQuickPreview.js.map
var user_search="";var user_search_xhr=null;var isStaticView=typeof additionalSpecsId!=="undefined";$("#NavTextField").focus(function(){if($("form[name='SearchNav'] input[name='media_typeid']").attr("value")==2||isStaticView){$("#NavTextField").autocomplete({autoFocus:isStaticView,minLength:1,source:function(request,response){var inversion_testing=0;if($("#InversionTesting").length==1&&$("#InversionTesting").attr("checked")==true){inversion_testing=1}if(user_search_xhr)user_search_xhr.abort();var suggestionPath=isStaticView?"Search/SuggestionByCertification/12/":"Search/Suggestion/";var restRequest=RESTUrl+suggestionPath+$("#NavTextField").val();user_search_xhr=$.ajax({url:restRequest,dataType:"json",success:function(data){user_search=$("#NavTextField").val();if(isStaticView){if(data.ITEMS.length>0){$(".search-form").removeClass("no-results")}else{$(".search-form").addClass("no-results")}}response(data.ITEMS)}})},focus:function(event,ui){return false},open:function(event,ui){if($(".navbar-ts .navbar-form .input-group").length){var textInputWidth=$(".navbar-ts .navbar-form .input-group").width()}else{var textInputWidth=$("#NavTextField").outerWidth()}var ulWidth=isStaticView?textInputWidth+51:textInputWidth;$(".ui-autocomplete").css("width",ulWidth+"px");$(".ui-autocomplete .ui-corner-all").bind({mouseover:function(){$(this).addClass("ui-state-focus")},mouseout:function(){$(this).removeClass("ui-state-focus")}})},select:function(event,ui){var filterString=ui.item.fgUrl.indexOf("?")==-1?"?":"&";$("#searchBarForm").find("input[type='hidden']").each(function(){if("media_typeid,featureID,synonym,keyword,prevent_feature_intercept".indexOf($(this).attr("name"))==-1){filterString+=$(this).attr("name")+"="+$(this).val()+"&"}});if(isStaticView){filterString+="additional_specs="+additionalSpecsId+"&"}window.location.href=ui.item.fgUrl+filterString.slice(0,-1);return false},position:{my:"left top-1",at:"left bottom",collision:"none"}}).data("ui-autocomplete")._renderItem=function(ul,item){if(ul.find("li:not(.ui-autocomplete-divider)").length>9){return ul}var title=item.synonym;var arr=[];var str=$.trim($("#NavTextField").val());var v_html=$.trim(item.synonym);if(str===""){return false}else{arr.push(str)}v_html=v_html.replace(/<!--(?:.*)\-->/g,"");var tags=/[^<>]+|<(\/?)([A-Za-z]+)([^<>]*)>/g;var a=v_html.match(tags),test=0;$.each(a,function(i,c){if(!/<(?:.|\s)*?>/.test(c)){$.each(arr,function(index,con){if(con===""){return}var kw=con+"";kw=kw.replace("(","\\(").replace(")","\\)");c=c.replace(new RegExp("("+kw+")","ig"),'<span style="font-weight: bold; color:#303030;">$1</span>')});a[i]=c}});title=a.join("");tags=/suggestionType=(\d)/;var t=location.href.match(tags);var appendHtml='<a><table border="0" cellpadding="0" cellspacing="0">';if(t&&t.length>0&&t[1]!=0){if(t[1]==1){appendHtml+='<tr><td rowspan="2" width="62" height="50" align="left" valign="center"><img src="'+item.icon+'" /></td><td class="auto_title" valign="middle">'+title+"</td></tr>"}else if(t[1]==2){appendHtml+='<tr><td class="auto_title" valign="middle">'+title+'</td></tr><tr><td class="auto_desc" valign="top">'+item.desc+"</td></tr>"}else{appendHtml+='<tr><td class="auto_title" valign="middle">'+title+"</td></tr>"}}else{if(item.fid==""){appendHtml+='<tr><td rowspan="2" width="62" height="50" align="left" valign="center"><img src="'+item.icon+'" /></td><td class="auto_title" valign="bottom">'+title+'</td></tr><tr><td class="auto_desc" valign="top">'+item.desc+"</td></tr>"}else{appendHtml+='<tr><td rowspan="2" width="62" height="50" align="left" valign="center"><img src="'+item.icon+'" /></td><td class="auto_title" valign="middle" height="50">'+title+"</td></tr>"}}appendHtml+="</table></a>";return $("<li></li>").data("ui-autocomplete-item",item).append(appendHtml).appendTo(ul)};$(window).resize(function(e){if(e&&e.isTrigger==3)return false;var textInputWidth=$(".navbar-ts .navbar-form .input-group").width();$(".ui-autocomplete").css("width",textInputWidth+"px")});$("#NavTextField").autocomplete().data("ui-autocomplete")._resizeMenu=function(){var ul=this.menu.element;var textFieldWidth=$("#NavTextField").width();var ulWidth=isStaticView?textFieldWidth+51:textFieldWidth;ul.outerWidth(ulWidth);var indexzindex=$(ul).css("z-index");if(indexzindex=="auto"){indexzindex=100}$(ul).css("z-index",""+(indexzindex+1300))};$("#NavTextField").bind("keydown",function(e){if(e.which==38||e.which==40)return;$("#NavTextField").autocomplete().data("ui-autocomplete").menu.blur()});if(isStaticView){$("#NavTextField").bind("keyup",function(e){if(e.target.value.length===0){$(".search-form").removeClass("no-results")}})}}});$("#NavTextField").blur(function(){if($("#NavTextField").data("ui-autocomplete")!="undefined"){$("#NavTextField").autocomplete({source:[]})}});
//# sourceMappingURL=search_autocomplete_script.js.map
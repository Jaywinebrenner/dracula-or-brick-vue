$(function(){$(".notification .btn-close").on("click",function(e){$(".notification").hide();Cookies.set("auto_beta","0",{path:"/",expires:1e3})})});if(osd_tiers==undefined){var osd_tiers={}}var dcJSON=Cookies.getJSON("DC")||{};var osdJSON=Cookies.getJSON("OSD")||{};var osdCart=(osdJSON||{}).eligible_cart||0;var osdTierJSON=osd_tiers||{};var osdTierKeys=Object.keys(osdTierJSON);if(price_tiers==undefined){var price_tiers={}}var priceTierKeys=Object.keys(price_tiers);var km_location=function(where_to){window.location=locale_folder()+"/Login/Keymaster.cfm?endpoint="+where_to;return false};var locale_folder=function(){if(page_locale!="en_US")return"/"+page_locale.toLowerCase();else return""};var couponBasedPrice=function(price,cart){var discount=dcJSON.value||0;var return_obj={price:price,monetary_discount:0,percent_discount:0};if(discount&&discount<100){return_obj.percent_discount=discount;return_obj.price=price-price*discount/100}else if(discount){return_obj.monetary_discount=discount/100;var discounted_price=price-discount/100*price/(price+cart);return_obj.price=discounted_price>0?discounted_price:price}return return_obj};var discountExceedsTier=function(price,cart,tierThreshold,discount){if(price+cart-discount>=parseFloat(tierThreshold))return true;return false};var osdBasedPrice=function(price,cart){var tierThreshold=osdTierKeys[osdTierKeys.length-1];var discount=osdTierJSON[tierThreshold];if(!discountExceedsTier(price,cart,tierThreshold,discount)){discount=0;for(var tierThreshold in osdTierKeys){if(!discountExceedsTier(price,cart,osdTierKeys[tierThreshold],osdTierJSON[osdTierKeys[tierThreshold]]))break;discount=osdTierJSON[osdTierKeys[tierThreshold]]}}var discountPrice=price-discount*(price/(price+cart));return{price:discountPrice,monetary_discount:discount}};var discountData=function(price,cart,blExcludeCoupon){price=parseFloat(price);cart=parseFloat(cart);osdPriceObject=osdBasedPrice(price,cart);couponPriceObject=couponBasedPrice(price,cart);if(couponPriceObject.price>=osdPriceObject.price||blExcludeCoupon){return{price:osdPriceObject.price.toFixed(2),monetary_discount:osdPriceObject.monetary_discount,percent_discount:0,class:"fa-cart-plus"}}else if(couponPriceObject.price<price){return{price:couponPriceObject.price.toFixed(2),monetary_discount:couponPriceObject.monetary_discount,percent_discount:couponPriceObject.percent_discount,class:"fa-tag"}}else{return{}}};var nextDiscountData=function(cart){var tierThreshold=osdTierKeys[osdTierKeys.length-1];var discount=osdTierJSON[tierThreshold];if(!discountExceedsTier(cart,0,tierThreshold,discount)){discount=osdTierJSON[osdTierKeys[0]];for(var tierThreshold in osdTierKeys){if(!discountExceedsTier(cart,0,osdTierKeys[tierThreshold],osdTierJSON[osdTierKeys[tierThreshold]]))break;discount=osdTierJSON[osdTierKeys[parseFloat(tierThreshold)+1]]}}var discount_offset=parseFloat(osdTierKeys[tierThreshold])+discount-cart||0;return{discount_offset:discount_offset,monetary_discount:discount}};var setShoppingCartDiscountTips=function(){var cartElementWidth=$(".shopping-cart-count-span").width();var currentDiscountObject=discountData(osdCart,0,true);var discountAmount=currentDiscountObject.monetary_discount;var nextDiscountObject=nextDiscountData(osdCart);var discountOffset=nextDiscountObject.discount_offset.toFixed(2);if($(".navbar-ts").width()!==768){if(discountAmount<10){cartElementWidth=cartElementWidth+40}else if(discountAmount>=10&&discountAmount<100){cartElementWidth=cartElementWidth+50}else if(discountAmount>=100){cartElementWidth=cartElementWidth+60}var discountMessage=function(){if(nextDiscountObject.monetary_discount&&parseFloat(discountOffset)>0){if(discountOffset.indexOf(".00")>-1)discountOffset=discountOffset.slice(0,-3);return i18next.t("header:buy_more_save_more_add")+" $<span id='osd-dollars-next-discount'>"+discountOffset+"</span> "+i18next.t("header:of_3d_models")+" $<span id='osd-current-discount'>"+nextDiscountObject.monetary_discount+"</span> "+i18next.t("header:on_eligible_items")}else{return i18next.t("header:youve_earned")+" $<span id='osd-current-discount'>"+discountAmount+"</span> "+i18next.t("header:off_instant_savings")}};if(discountAmount){if($("#navbar-discount-anchor").length==0){$(".shopping-cart-count").append('<a href="#" id="navbar-discount-anchor" class="popover-anchor" data-toggle="popover" data-trigger="hover" data-content="'+discountMessage()+'" data-placement="bottom" data-html="true" data-original-title="" title=""><span id="navbar-discount" class="discount-amount" style="text-transform:uppercase;"><i class="fa fa-tag"></i>$'+discountAmount+"</span></a>");$(".shopping-cart-count").animate({width:cartElementWidth>70?cartElementWidth:"auto",marginRight:0},300);$(".shopping-cart-count .discount-amount").show("slide",{direction:"left"},300);setTimeout(function(){$("#navbar-discount-anchor").popover()},310)}else{$("#navbar-discount-anchor").remove();$(".shopping-cart-count").append('<a href="#" id="navbar-discount-anchor" class="popover-anchor" data-toggle="popover" data-trigger="hover" data-content="'+discountMessage()+'" data-placement="bottom" data-html="true" data-original-title="" title=""><span id="navbar-discount" class="discount-amount" style="text-transform:uppercase;"><i class="fa fa-tag"></i>$'+discountAmount+"</span></a>");$(".shopping-cart-count").animate({width:cartElementWidth>70?cartElementWidth:"auto",marginRight:0},1);$(".shopping-cart-count .discount-amount").show("slide",{direction:"left"},1);setTimeout(function(){$("#navbar-discount-anchor").popover()},10)}}else{$("#navbar-discount-anchor").hide();$(".navbar-nav .shopping-cart-count").css("width","auto")}}};if(dcJSON.expiration&&!$("#coupon").hasClass("couponInitialized")&&Date.parse(dcJSON.expiration)>=Date.now()){var discountPromotionEnd=Date.parse(dcJSON.expiration)}$(document).ready(function(){if(typeof userIconAlert!=="undefined"&&userIconAlert){$(".fa-user").delay(5e3).animate({color:"red"},15e3)}$(".navbar-toggle").click(function(){$(this).children(".fa").toggleClass("fa-bars").toggleClass("fa-chevron-circle-up")});if(!show_tiered_prices){$(".AssetTile-md .sale-badge").each(function(){$(this).removeClass("hidden")})}if(show_tiered_prices){$(".AssetTile-md .asset_info_price, .AssetTile-md .AssetFormatInfo, .AssetTile-md .format_price .item_price").each(function(){var price=parseFloat($(this).find(".RegularProductPrice").text().replace("$","").replace(",",""));if(isNaN(price)){price=parseFloat($(this).find(".lightPrice").text().replace("$","").replace(",",""))}$(this).find(".RegularProductPrice").text("");if(price!=="Free"){for(var key in priceTierKeys){if(parseFloat(price)<=parseFloat(priceTierKeys[key])){var salePrice="$"+price_tiers[priceTierKeys[key]];$(this).find(".lightPrice").text(salePrice);break}}}})}else{setShoppingCartDiscountTips();if(!jQuery.isEmptyObject(dcJSON)||!jQuery.isEmptyObject(osdJSON)){$(".AssetTile-md .couponEligible").closest(".price").each(function(){var price=$(this).find(".lightPrice").text().replace("$","").replace(",","");if(price!=="Free"){var discountObject=discountData(price,osdCart,false);var salePrice=discountObject.price;if(typeof salePrice!=="undefined"&&salePrice.indexOf(".00")>=0){salePrice=salePrice.substring(0,salePrice.length-3)}if(parseFloat(price)!==parseFloat(salePrice)){var discountMessage=function(salePrice){if(discountObject.class=="fa-tag"){if(discountObject.monetary_discount){var couponValue="$"+discountObject.monetary_discount/100}else{var couponValue=discountObject.percent_discount+"%"}return i18next.t("header:special_offer_get")+" "+couponValue+" "+i18next.t("header:off_with_your")+" "+dcJSON.name+" "+i18next.t("header:coupon")+"."}else{return i18next.t("header:buy_more_save_more_get")+" $"+discountObject.monetary_discount+" "+i18next.t("header:in_instant_savings")}};$(this).addClass("coupon-applied");$(this).find(".lightPrice");$(this).append(" <span id='"+$(this).find(".lightPrice").attr("id")+"-discount' class='discount-price' style='display:none;'><span class='black'>$"+salePrice+"</span><a href='#' class='item-price-discount-anchor' class='popover-anchor' data-toggle='popover' data-trigger='hover' data-content='"+discountMessage(salePrice)+"' data-placement='top' data-html='true' data-original-title='' title=''><i class='fa "+discountObject.class+"'></i></a></span>");$(".discount-price").fadeIn(1200)}}})}}if(dcJSON.value){if(dcJSON.value<100){$("#coupon-value").text(dcJSON.value+"%");$("#coupon").show().delay(300).animate({opacity:1},300)}else{$("#coupon-value").text("$"+dcJSON.value/100)}$("#coupon-name").text(dcJSON.name);if(dcJSON.state=="m"){$("#coupon").addClass("minimized");$(".show-max").addClass("hidden")}else if(dcJSON.state=="h"){$("#coupon").addClass("hidden")}var dc=Cookies.get("DC");$("#coupon").click(function(event){if(dc.indexOf('state":"m"')==-1){Cookies.remove("DC");Cookies.set("DC",dc.replace("}",',"state":"m"}'),{expires:new Date(dcJSON.expiration),domain:domainName})}event.stopPropagation();$(".show-max").toggleClass("hidden");$("#coupon").toggleClass("minimized")});$("#coupon .hide-coupon").click(function(event){event.preventDefault();$("#coupon").toggleClass("hidden");dc=Cookies.get("DC");Cookies.remove("DC");if(dc.indexOf('state":"m"')==-1){Cookies.set("DC",dc.replace("}",',"state":"h"}'),{expires:new Date(dcJSON.expiration),domain:domainName})}else{Cookies.set("DC",dc.replace('"state":"m"}','"state":"h"}'),{expires:new Date(dcJSON.expiration),domain:domainName})}});$("#coupon").stop().delay(300).animate({opacity:1},300);$("#coupon").addClass("couponInitialized")}if(dcJSON.expiration&&!$("#coupon").hasClass("couponInitialized")&&Date.parse(dcJSON.expiration)>=Date.now()){var discountPromotionEnd=Date.parse(dcJSON.expiration)}countdown();initPopover()});var initPopover=function(){$(".manualPopover").popover({html:true}).on("mouseenter",function(){if(!$(this).next("div.popover:visible").length){$(this).popover("show")}if($(this).parent().find(".popover.bottom .fillGap").length==0){$(this).parent().find(".popover.bottom").append("<div class='fillGap'></div>")}}).on("mouseleave",function(){var _this=this;if(!$(".popover:hover").length){$(this).popover("hide")}else{$(".popover").mouseleave(function(){if(!$(".manualPopover:hover").length){$(_this).popover("hide")}$(this).off("mouseleave")})}}).on("touchend",function(){if($(this).hasClass("license-popover")){event.preventDefault();$(this).popover("show")}});$("[data-toggle=popover]").click(function(event){if(event.target.className.indexOf("manualPopover")==-1){event.preventDefault()}});$("body").mouseup(function(e){if($(".popover").hasClass("in")&&e.target.className!=="popoverInternalLink"){$(".popover").remove()}})};var countdown=function(){if(typeof discountPromotionEnd!=="undefined"&&discountPromotionEnd>=Date.now()){var timeRemaining=discountPromotionEnd-(new Date).getTime()}else{var timeRemaining=0;$("#coupon").hide()}var days=Math.floor(timeRemaining/(1e3*60*60*24));var hours=Math.floor(timeRemaining%(1e3*60*60*24)/(1e3*60*60));var minutes=Math.floor(timeRemaining%(1e3*60*60)/(1e3*60));var seconds=Math.floor(timeRemaining%(1e3*60)/1e3);if(document.getElementById("sale-countdown-date")){$("#sale-days span").text(days);$("#sale-hours span").text(hours);$("#sale-minutes span").text(minutes);$("#sale-seconds span").text(seconds)}if(timeRemaining<0&&document.getElementById("sale-sub-header")&&typeof supportLink!=="undefined"){clearInterval(updateCountdown);document.getElementById("sale-sub-header").innerHTML=i18next.t("header:sale_has_ended")+" <a href='"+supportLink+"' target='_blank' class='support-link'>"+i18next.t("header:support")+"</a> "+i18next.t("header:accommodate_you")}};var updateCountdown=setInterval(function(){countdown()},1e3);function updateSearchFormAction(){var keyword=$("#NavTextField").val().replace(/ /g,"+"),query_string="";$("form[name='SearchNav'] input[type='hidden']").not("input[name='media_typeid'],input[name='prevent_feature_intercept']").each(function(i,node){query_string+=node.name+"="+node.value+"&"});if(query_string.length)keyword=keyword+"&"+query_string.slice(0,-1);$("form[name='SearchNav'] ").attr("action",$("form[name='SearchNav'] ").attr("action").split("?keyword=")[0]+"?keyword="+keyword)}$("#NavTextField").not("#Search #NavTextField").bind("keydown",function(e){updateSearchFormAction()});$("form[name='SearchNav'] button[type='submit']").not("#Search form[name='SearchNav'] button[type='submit']").click(function(){updateSearchFormAction()});$("form[name='SearchNav'] .media-type-menu a").click(function(event){event.preventDefault();var existingMediaType=$("form[name='SearchNav'] input[name='media_typeid']").val().trim();if($(this).data("value")>=0){$("form[name='SearchNav'] input[name='media_typeid']").attr("value",$(this).data("value"));$("form[name='SearchNav'] .media-type-menu a[data-value='"+$(this).data("value")+"']").addClass("hidden");$("form[name='SearchNav'] .media-type-menu a[data-value='"+existingMediaType+"']").removeClass("hidden");$("form[name='SearchNav'] .media-type-menu button span.media-type-label").text($("form[name='SearchNav'] .media-type-menu a[data-value='"+$(this).data("value")+"']").text());if($("form[name='SearchNav'] input[name='prevent_feature_intercept']").length>0){$("form[name='SearchNav'] input[name='prevent_feature_intercept']").val(1)}else{$("form[name='SearchNav']").append('<input type="hidden" name="prevent_feature_intercept" value="1">')}}if($(this).data("value")!==2){arr3dModelFilters=["additional_specs","certification_id","min_poly","max_poly"];$("#searchBarForm input[type='hidden']").each(function(i,node){if(arr3dModelFilters.indexOf(node.name)>-1){node.remove()}})}});$(".search-input").click(function(){$("#NavTextField").focus()});$("#searchBarForm").click(function(){if($(".token-input-token-facebook").length==1){$("#token-input-NavTextField").focus()}else{$("#NavTextField").focus()}});
//# sourceMappingURL=public.js.map